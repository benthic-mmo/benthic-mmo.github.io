---
layout: default
title: About
---

<div class="bubble">
  <h1>Object Updates</h1>
  After authentication,
  <a
    href="https://docs.rs/metaverse_messages/latest/metaverse_messages/core/object_update/index.html"
    >ObjectUpdate</a
  >
  packets will start streaming in from the server, representing other player
  avatars, furniture, environment data, etc.
  <br />
  <br />
  This is handled by the server's "interest list". The interest list is a list
  that is generated by the server of all objects in view of the user.
  <br />
  <br />
  This is one of the largest packets sent by the server.

  <hr />
  <br />
  Not all of the ObjectUpdate fields will be used by every object. There are
  several unused fields in the packet such as
  <a
    href="https://docs.rs/metaverse_messages/latest/metaverse_messages/core/object_update/struct.ObjectUpdate.html#structfield.joint_type"
    >joint type</a
  >
  and
  <a
    href="https://docs.rs/metaverse_messages/latest/metaverse_messages/core/object_update/struct.PrimitiveGeometry.html"
    >primitive_geometry</a
  >. Some of the most useful elements of the ObjectUpdate packet are
  <div class="bubble-row">
    <div class="contrast_bubble">
      <a
        href="https://docs.rs/metaverse_messages/latest/metaverse_messages/core/object_update/struct.ObjectUpdate.html#structfield.full_id"
      >
        <h3>full_id</h3>
      </a>
      The full UUID of the object. Can be used to retrieve the full mesh from
      the ViewerAsset endpoint.
    </div>

    <div class="contrast_bubble">
      <a
        href="https://docs.rs/metaverse_messages/latest/metaverse_messages/core/object_update/struct.ObjectUpdate.html#structfield.pcode"
      >
        <h3>pcode</h3>
      </a>
      <p>
        This u8 number stores the object's
        <a
          href="https://docs.rs/metaverse_messages/latest/metaverse_messages/core/object_update/enum.ObjectType.html"
          >type.</a
        >
      </p>
    </div>

    <div class="contrast_bubble">
      <a
        href="https://docs.rs/metaverse_messages/latest/metaverse_messages/core/object_update/struct.ObjectUpdate.html#structfield.object_data"
        ><h3>data</h3></a
      >
      <p>
        the data can store an object's xy location and the velocity,
        acceleration, rotation, and angular velocity. These updates can be high,
        medium, and low precision updates, with foot collision planes and
        without. This is stored in the
        <a
          href="https://docs.rs/metaverse_messages/latest/metaverse_messages/core/object_update/struct.Update.html"
          >Update</a
        >
        object.
      </p>
    </div>
  </div>
  {% capture update %}
  <h2>Parsing Object Update</h2>
  Though the majority of the ObjectUpdate struct is straightforward, the Data
  portion of it can be difficult to parse correctly.
  <br />
  The type of update is determined by the length of the data field.
  <div class="bubble-row">
    <div class="tertiary_bubble">
      <h2>High</h2>
      <div class="sinister_bubble">
        <a
          href="https://docs.rs/metaverse_messages/latest/metaverse_messages/core/object_update/index.html#high-precision-update-with-foot-collision-plane"
          ><h3>High Precision Update With Foot Collision Plane</h3></a
        >
        76 bytes
      </div>
      <div class="sinister_bubble">
        <a
          href="https://docs.rs/metaverse_messages/latest/metaverse_messages/core/object_update/index.html#high-precision-update"
          ><h3>High Precision Update</h3></a
        >
        60 bytes
      </div>
    </div>
    <div class="tertiary_bubble">
      <h2>Medium</h2>
      <div class="sinister_bubble">
        <a
          href="https://docs.rs/metaverse_messages/latest/metaverse_messages/core/object_update/index.html#medium-precision-update-with-foot-collision-plane"
          ><h3>Medium Precision Update With Foot Collision Plane</h3></a
        >
        48 bytes
      </div>
      <div class="sinister_bubble">
        <a
          href="https://docs.rs/metaverse_messages/latest/metaverse_messages/core/object_update/index.html#medium-precision-update"
          ><h3>Medium Precision Update</h3></a
        >
        32 bytes
      </div>
    </div>
    <div class="tertiary_bubble">
      <h2>Low</h2>
      <div class="sinister_bubble">
        <a
          href="https://docs.rs/metaverse_messages/latest/metaverse_messages/core/object_update/index.html#low-precision-update"
          ><h3>Low Precision Update</h3></a
        >
        16 bytes
      </div>
    </div>
  </div>
  {% endcapture %} {% include evil_benthic.html content=update %}
</div>
<div class="bubble">
  <h1>Handling</h1>
  <div class="bubble-row">
    <div class="contrast_bubble_small">
      <h3>1.</h3>
      <p>
        The ObjectUpdate is
        <a
          href="https://github.com/benthic-mmo/metaverse_client/blob/7dff92943d2660b118346c77fddcd70b6b436631/crates/core/src/udp_handler.rs#L26"
          >received</a
        >
        from the UDP socket
      </p>
    </div>
    <div class="contrast_bubble_small">
      <h3>2.</h3>
      <p>
        ObjectUpdate is
        <a
          href="https://github.com/benthic-mmo/metaverse_client/blob/7dff92943d2660b118346c77fddcd70b6b436631/crates/messages/src/core/object_update.rs#L169"
          >parsed from bytes</a
        >
      </p>
    </div>
    <div class="contrast_bubble_small">
      <h3>2.</h3>
      <p>
        The
        <a
          href="https://github.com/benthic-mmo/metaverse_client/blob/7dff92943d2660b118346c77fddcd70b6b436631/crates/core/src/core/objects.rs#L31"
          >mailbox</a
        >
        determines the type of the object, and passes it along to its
        appropriate handler (Tree, <a href="/agent">Avatar</a>, Grass, etc...)
      </p>
    </div>
  </div>
</div>
